<%= turbo_frame_tag 'payment_form', class: 'container mx-auto p-8' do %>
  <%= form_for payment do |form| %>
    <div data-controller="form">
      <div class="mb-6">
        <label for="sender" class="block text-sm font-medium text-gray-700">Select Sender</label>
        <select id="sender" name="payment[sender_id]" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                data-action="change->form#updateSecondSelect">
          <%= options_from_collection_for_select(User.all, :id, :username) %>
        </select>
      </div>

      <div class="mb-6">
        <label for="receiver" class="block text-sm font-medium text-gray-700">Select Receiver</label>
        <select id="receiver" name="payment[receiver_id]" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
          <!-- Options will be dynamically updated -->
        </select>
      </div>

      <div class="mb-6">
        <label for="amount" class="block text-sm font-medium text-gray-700">Amount</label>
        <input id="amount" type="number" name="payment[amount]" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
      </div>

      <div class="mb-6">
        <label for="currency" class="block text-sm font-medium text-gray-700">Select Currency</label>
        <select id="currency" name="payment[currency_id]" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                data-action="change->form#updateSecondSelect">
          <%= options_from_collection_for_select(Currency.all, :id, :name) %>
        </select>
      </div>

      <div class="mb-6">
        <label for="payment_type" class="block text-sm font-medium text-gray-700">Select Payment Type</label>
        <select id="payment_type" name="payment[payment_type]" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
          <%= options_for_select(Payment.payment_types) %>
        </select>
      </div>

      <div class="mb-4">
        <%= form.label :execute_at, "Execution Time", class: "block text-sm font-medium text-gray-700" %>
        <%= form.datetime_local_field :execute_at, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>


      <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:ring-2 focus:ring-blue-300">
        Send
      </button>
    </div>
  <% end %>
<% end %>
